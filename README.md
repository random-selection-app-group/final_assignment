# **项目名称：命运飞镖**

## 一．设计理念
### 1.1 初稿
我们一开始想着设计一个能有效缓解选择困难症的app，经过讨论，决定以用户自行输入多个活动内容以及主题来构建一个选择的“库”，然后随机输出其中的一个给用户来帮其选择。

### 1.2 改进
在此基础上，我们创建了轮盘组件，用于在随机输出用户选择内容时提供一个较为美观的UI输出，在此基础功能上，添加了转到的历史记录、使用次数等等的功能。与此同时，我们加入了app封面，登录、注册界面，用户的个人中心页面，以及“真心话大冒险”小游戏来充实本项目。

## 二．实现过程
### 2.1 Lib结构
思索过后，我们决定先搭好框架，根本项目功能需求，在lib目录下分为五个模块，分别为components，router，screens，state 和 main.dart。
#### 2.1.1 结构优点
- **模块化**：将不同功能模块拆分成独立的文件和文件夹，使代码更易于管理和维护。
- **可维护性**：更容易定位和修复bug，以及在不影响其他部分的情况下进行更改或升级。

#### 2.1.2 components
- **复用性**：将通用的UI组件（如custom_button.dart、custom_text_field.dart）放在components文件夹中，方便在项目的不同部分复用。
- **一致性**：确保应用中的相同功能或样式在多个地方保持一致，减少代码重复。

#### 2.1.3 router
- **集中管理**：将所有路由集中管理在router文件夹中（如router.dart），便于管理导航逻辑，避免路由分散在不同文件中导致的混乱。
- **灵活性**：更容易添加、修改或删除路由，提高导航逻辑的灵活性。

#### 2.1.4 state
- **单一来源的真相**：将应用的状态集中管理在state文件夹中（如auth_state.dart、spin_wheel_state.dart），确保状态的一致性和可靠性。
- **清晰的状态逻辑**：更容易理解和管理应用的状态变化，提高代码的可读性。

### 2.2 关键部分
#### 2.2.1 本地存储化
如AuthState类通过ChangeNotifier实现了一个简单的用户认证和状态管理系统，使用SharedPreferences来进行本地存储。

#### 2.2.2 真心话大冒险页面设计
使用Provider状态管理、SharedPreferences本地存储、AnimatedTextKit动画效果以及CustomTextField和CustomButton自定义组件，创建了一个功能完善且具有动态效果的“大冒险”界面。

主要实现了以下功能：
1. 添加大冒险：用户可以输入新的大冒险挑战并将其添加到状态管理中。
2. 显示大冒险：从本地文件中加载问题并随机显示。
3. 动画效果：使用动画文本和渐变背景提升用户体验。
4. 状态管理：通过Provider管理大冒险挑战的状态，确保数据在应用不同部分之间的一致性。
5. 本地存储：使用SharedPreferences实现用户数据和挑战记录的持久化存储。

#### 2.2.3 app主页的设计
通过使用Provider状态管理、Swiper图片轮播、GNav底部导航栏以及自定义按钮组件，创建了一个功能完善且具有动态效果的主界面。

主要实现了以下功能：
1. 主页内容：包含图片轮播和多个按钮，提供不同的功能入口。
2. 个人资料：使用ProfileScreen组件显示用户的个人资料。
3. 状态管理：通过Provider管理用户的登录状态和权限。
4. 导航栏：使用GNav实现带有动画效果的底部导航栏（bottomNavigationBar）。
5. 动态效果：使用Swiper实现图片轮播，提升用户体验。
6. 条件渲染：根据用户权限显示管理员按钮，提高应用的灵活性和安全性。

### 2.3 lib目录
  ├── lib
  │   ├── components
  │   │   ├── arrow.dart
  │   │   ├── custom_button.dart
  │   │   ├── custom_dialog.dart
  │   │   ├── custom_text_field.dart
  │   │   ├── spin_wheel.dart
  │   │   ├── truth_or_dare_card.dart
  │   │   ├── WheelOfFortune.dart
  │   ├── router
  │   │   ├── router.dart
  │   ├── screens
  │   │   ├── admin_screen.dart
  │   │   ├── change_name_screen.dart
  │   │   ├── change_password_screen.dart
  │   │   ├── change_picture_screen.dart
  │   │   ├── create_theme_screen.dart
  │   │   ├── dare_screen.dart
  │   │   ├── history_screen.dart
  │   │   ├── home_screen.dart
  │   │   ├── login_screen.dart
  │   │   ├── manage_questions_screen.dart
  │   │   ├── my_themes_screen.dart
  │   │   ├── profile_screen.dart
  │   │   ├── random_selection_screen.dart
  │   │   ├── register_screen.dart
  │   │   ├── RoulettePage.dart
  │   │   ├── truth_or_dare_screen.dart
  │   │   ├── truth_screen.dart
  │   │   ├── welcome_screen.dart
  │   ├── state
  │   │   ├── auth_state.dart
  │   │   ├── spin_wheel_state.dart
  │   │   ├── theme_provider.dart
  │   │   ├── truth_or_dare_state.dart
  │   ├── main.dart

## 三．后续改进
### 3.1 对各组件自定义的优化处理
使用动画和过渡效果、使用自定义的按钮样式、自定义文本字段样式等等。

### 3.2 基于用户使用的数据挖掘
#### 3.2.1 用户行为数据收集与分析
- **数据收集**：
  - 用户输入的数据：例如在"真心话大冒险"中用户输入的问题和回答。
  - 用户选择和使用情况：例如用户选择了哪个游戏、游戏中的选项、按钮点击次数和频率。
  - 用户交互记录：例如用户停留在某个界面的时间、用户滚动页面的频率等。

- **数据分析**：
  - 频繁模式挖掘：找出用户常用的功能和常见的选择，优化界面布局和功能展示。
  - 序列模式挖掘：分析用户在使用过程中操作的顺序，预测用户的下一步操作，提供智能推荐。

#### 3.2.2 个性化推荐系统
基于用户行为数据，可以实现个性化推荐系统：

- **真心话大冒险问题推荐**：
  - 基于用户历史数据：根据用户之前输入的问题和回答，推荐相关的问题。
  - 基于相似用户数据：利用协同过滤算法，推荐与其他相似用户常用的问题。

- **游戏模式推荐**：
  - 基于使用频率：推荐用户经常玩的游戏模式。
  - 基于时间段：分析用户在不同时间段的使用习惯，推荐合适的游戏模式。

#### 3.2.3 用户画像构建
通过数据挖掘技术，构建用户画像，提升用户体验：

- **用户标签**：
  - 兴趣标签：基于用户选择和输入的数据，构建用户兴趣标签。
  - 行为标签：根据用户的使用习惯，构建行为标签。

- **个性化内容**：
  - 个性化界面：根据用户的兴趣和行为，定制化界面内容，例如推荐用户喜欢的颜色、字体等。
  - 个性化通知：根据用户的行为标签，推送个性化的通知和提醒。

#### 3.2.4 序列模式轨迹挖掘
通过分析用户的操作序列，优化应用流程，提升用户体验：

- **流程优化**：
  - 常见操作路径：分析用户的常见操作路径，简化用户操作步骤。
  - 异常行为检测：检测用户的异常操作行为，提供及时的帮助和反馈。

- **操作预测**：
  - 下一步操作预测：根据用户的操作序列，预测用户的下一步操作，提前加载相关内容。
  - 智能输入建议：根据用户之前的输入内容，提供智能输入建议，提升输入效率。

#### 3.2.5 用户反馈与优化
通过收集用户反馈，不断优化应用：

- **用户反馈
- **用户反馈收集**：
  - 应用内反馈：在应用内设置反馈入口，收集用户的意见和建议（留下邮箱）。
  - 数据分析反馈：通过数据分析，发现用户使用中的问题，进行改进。

- **持续优化**：
  - A/B测试：进行不同版本的A/B测试，分析用户行为数据，选择最佳方案。
  - 迭代优化：根据用户反馈和数据分析结果，不断优化应用功能和界面。

## 四．结语
现在是晚上22点整，我伴随手表提示音写下结语，作为一个很普通的大学生，我算法水平差强人意，更是没有锻炼过项目能力，但是能和几个伙伴一起完成一个不算优美但贵在完整自主的项目，我感到很高兴，这个Flutter项目是我计算机生涯第三个参与的项目，我想或许我会在一次次的锻炼中体会到coding的乐趣，程序的优雅。

**第六小组**  
写于云南大学（呈贡）泽湖畔
